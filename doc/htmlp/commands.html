<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" 
 "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <!-- $Id: commands.html,v 1.14 2007/10/06 17:42:13 deraugla Exp $ -->
  <!-- Copyright (c) 2007 INRIA -->
  <title>Commands and Files</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <link rel="stylesheet" type="text/css" href="styles/base.css"
        title="Normal" />
</head>
<body>

<div id="menu">
</div>

<div id="content">

<h1 class="top">Commands and Files</h1>

<p>The main command of Camlp5 is "<tt>camlp5</tt>". It is an OCaml
  program in bytecode (compiled with ocamlc, not ocamlopt), able to
  dynamically load OCaml object files (ending with ".cmo" and
  ".cma").</p>

<p>All other Camlp5 commands derive from that one: they are the
  command "<tt>camlp5</tt>" with some implicitely applied
  parameters.</p>

<p>All commands have an option "<tt>-help</tt>" which display all
  possible command parameters and options. Notice that some parameters
  (the parsing and pretting kits) may add new options. For example,
  the command:</p>

<pre>
  camlp5 pr_r.cmo -help
</pre>

<p>prints more lines than just:</p>

<pre>
  camlp5 -help
</pre>

<p>The first parameters ("load options") allow to specify parsing and
  printing kits (".cmo" and ".cma" files) which are loaded inside the
  "<tt>camlp5</tt>" core before any action. Other options may
  follow.</p>

<div id="tableofcontents">
</div>

<h2>Parsing and Printing Kits</h2>

<h3>Parsing kits</h3>

<h4>language parsing kits</h4>

<dl>
  <dt><tt>pa_r.cmo</tt></dt>
  <dd>Revised syntax (without parsers).</dd>
  <dt><tt>pa_rp.cmo</tt></dt>
  <dd>Add revised syntax parsers.</dd>
  <dt><tt>pa_o.cmo</tt></dt>
  <dd>Normal syntax (without parsers). Option added:
    <dl>
      <dt><tt>-no_quot</tt></dt>
      <dd>don't parse quotations, allowing to use,
        e.g. "<tt>&lt;:&gt;</tt>" as token.</dd>
    </dl>
  </dd>
  <dt><tt>pa_op.cmo</tt></dt>
  <dd>Add normal syntax parsers.</dd>
  <dt><tt>pa_oop.cmo</tt></dt>
  <dd>Add normal syntax parsers without code optimization.</dd>
  <dt><tt>pa_lex.cmo</tt></dt>
  <dd>Add stream lexers.</dd>
</dl>

<h4>parsing extension</h4>

<dl>
  <dt><tt>pa_extend.cmo</tt></dt>
  <dd>Add the EXTEND statement. Options added:
    <dl>
      <dt><tt>-split_ext</tt></dt>
      <dd>split EXTEND by functions to turn around a PowerPC problem.</dd>
      <dt><tt>-quotify</tt></dt>
      <dd>generate code for quotations (internally used to synchronize
        q_MLast and pa_r)</dd>
      <dt><tt>-meta_action</tt></dt>
      <dd>undocumented (internally used for compiled version)</dd>
    </dl>
  </dd>
  <dt><tt>pa_extfold.cmo</tt></dt>
  <dd>Add the specific symbols FOLD0 and FOLD1 to the EXTEND
    statement.</dd>
</dl>

<h4>printing extension</h4>

<dl>
  <dt><tt>pa_extprint.cmo</tt></dt>
  <dd>Add the EXTEND_PRINTER statement.</dd>
</dl>

<h4>extensible functions</h4>

<dl>
  <dt><tt>pa_extfun.cmo</tt></dt>
  <dd>Add the extensible function ("extfun" statement).</dd>
</dl>

<h4>functional parsers</h4>

<dl>
  <dt><tt>pa_fstream.cmo</tt></dt>
  <dd>Add the functional parsers ("fparser" statement).</dd>
</dl>

<h4>other languages</h4>

<dl>
  <dt><tt>pa_lisp.cmo</tt></dt>
  <dd>Lisp syntax.</dd>
  <dt><tt>pa_scheme.cmo</tt></dt>
  <dd>Scheme syntax.</dd>
  <dt><tt>pa_sml.cmo</tt></dt>
  <dd>SML syntax.</dd>
</dl>

<h4>other parsing kits</h4>

<dl>
  <dt><tt>pa_lefteval.cmo</tt></dt>
  <dd>Add guarantee of left evaluation in functions calls.</dd>
  <dt><tt>pa_macro.cmo</tt></dt>
  <dd>Add macros. Options added:
    <dl>
      <dt><tt>-D &lt;string&gt;</tt></dt>
      <dd>define for IFDEF statement</dd>
      <dt><tt>-U &lt;string&gt;</tt></dt>
      <dd>undefine for IFDEF statement</dd>
      <dt><tt>-defined</tt></dt>
      <dd>print the defined macros and exit</dd>
    </dl>
  </dd>
  <dt><tt>pa_pragma.cmo</tt></dt>
  <dd>Add pragma directive: evaluations at parse time</dd>
</dl>

<h3>Printing kits</h3>

<h4>language printing kits</h4>

<dl>
  <dt><tt>pr_r.cmo</tt></dt>
  <dd>Display in revised syntax. Added options:
    <dl>
      <dt><tt>-flag &lt;str&gt;</tt></dt>
      <dd>
        Change pretty printing behaviour according to "<tt>&lt;str&gt;</tt>":<br/>
        A/a enable/disable all flags<br/>
        C/c enable/disable comments in phrases<br/>
        D/d enable/disable allowing expanding 'declare'<br/>
        E/e enable/disable equilibrate cases<br/>
        L/l enable/disable allowing printing 'let..in' horizontally<br/>
        S/s enable/disable printing sequences beginners at end of lines<br/>
        default setting is "aS".</dd>
      <dt><tt>-wflag &lt;str&gt;</tt></dt>
      <dd>Change displaying 'where' statements instead of 'let':<br/>
        A/a enable/disable all flags<br/>
        I/i enable/disable 'where' after 'in'<br/>
        L/l enable/disable 'where' after 'let..='<br/>
        M/m enable/disable 'where' after 'match' and 'try'<br/>
        P/p enable/disable 'where' after left parenthesis<br/>
        R/r enable/disable 'where' after 'record_field..='<br/>
        S/s enable/disable 'where' in sequences<br/>
        T/t enable/disable 'where' after 'then' or 'else'<br/>
        V/v enable/disable 'where' after 'value..='<br/>
        W/w enable/disable 'where' after '<tt>-&gt;</tt>'<br/>
        default setting is "Ars".</dd>
      <dt><tt>-l &lt;length&gt;</tt></dt>
      <dd>Maximum line length for pretty printing (default 78)</dd>
      <dt><tt>-sep_src</tt></dt>
      <dd>Read source file for text between phrases (default).</dd>
      <dt><tt>-sep &lt;string&gt;</tt></dt>
      <dd>Use this string between phrases instead of reading source.</dd>
    </dl>
  </dd>
  <dt><tt>pr_ro.cmo</tt></dt>
  <dd>Add display objects, labels and variants in revised syntax.</dd>
  <dt><tt>pr_rp.cmo</tt></dt>
  <dd>Add display parsers with their (revised) syntax.</dd>
  <dt><tt>pr_o.cmo</tt></dt>
  <dd>Display in normal syntax. Added options:
    <dl>
      <dt><tt>-flag &lt;str&gt;</tt></dt>
      <dd>Change pretty printing behaviour according to <tt>&lt;str&gt;</tt>:<br/>
        A/a enable/disable all flags<br/>
        C/c enable/disable comments in phrases<br/>
        L/l enable/disable allowing printing 'let..in' horizontally<br/>
        M/m enable/disable printing double semicolons<br/>
        default setting is "Am".</dd>
      <dt><tt>-l &lt;length&gt;</tt></dt>
      <dd>Maximum line length for pretty printing (default 78)</dd>
      <dt><tt>-sep_src</tt></dt>
      <dd>Read source file for text between phrases (default).</dd>
      <dt><tt>-sep &lt;string&gt;</tt></dt>
      <dd>Use this string between phrases instead of reading source.</dd>
    </dl>
  </dd>
  <dt><tt>pr_op.cmo</tt></dt>
  <dd>Add displaying parsers with their (normal) syntax.</dd>
</dl>

<h4>extensible functions</h4>

<dl>
  <dt><tt>pr_extfun.cmo</tt></dt>
  <dd>Add displaying extensible functions ("extfun" statement) in
    their initial syntax.</dd>
</dl>

<h4>other language</h4>

<dl>
  <dt><tt>pr_scheme.cmo</tt></dt>
  <dd>Display in Scheme syntax. Option added:
    <dl>
      <dt><tt>-l &lt;length&gt;</tt></dt>
      <dd>Maximum line length for pretty printing (default 78)</dd>
      <dt><tt>-sep &lt;string&gt;</tt></dt>
      <dd>Use this string between phrases instead of reading source.</dd>
    </dl>
  </dd>
  <dt><tt>pr_schemep.cmo</tt></dt>
  <dd>Add display parsers with their (Scheme) syntax.</dd>
</dl>

<h4>other printing kits</h4>

<dl>
  <dt><tt>pr_extend.cmo</tt></dt>
  <dd>Add the displaying of EXTEND statements in their initial
    syntax.Option added:
    <dl>
      <dt><tt>-no_slist</tt></dt>
      <dd>Don't reconstruct SLIST, SOPT, SFLAG</dd>
    </dl>
  </dd>
  <dt><tt>pr_depend.cmo</tt></dt>
  <dd>Display dependencies. Option added:
    <dl>
      <dt><tt>-I dir</tt></dt>
      <dd>Add "dir" to the list of search directories.</dd>
    </dl>
  </dd>
  <dt><tt>pr_dump.cmo</tt></dt>
  <dd>Dump the syntax tree in binary (for the OCaml compiler)</dd>
  <dt><tt>pr_null.cmo</tt></dt>
  <dd>No output.</dd>
</dl>

<h3>Quotations expanders</h3>

<dl>
  <dt><tt>q_MLast.cmo</tt></dt>
  <dd>Syntax tree quotations. Define the quotations named: "expr",
    "patt", "ctyp", "str_item", "sig_item", "module_type", "module_expr",
    "class_type", "class_expr", "class_sig_item", "class_str_item",
    "with_constr" and "poly_variant".</dd>
  <dt><tt>q_phony.cmo</tt></dt>
  <dd>Transform quotations into phony variables to be able to pretty
    print the quotations in their initial form (not suitable for
    compilation)</dd>
</dl>

<h2>Commands</h2>

<dl>
  <dt><tt>camlp5r</tt></dt>
  <dd>Shortcut for "<tt>camlp5 pa_r.cmo pa_rp.cmo pr_dump.cmo</tt>"</dd>
  <dt><tt>camlp5r.opt</tt></dt>
  <dd>Same as previous, but in native code instead of bytecode,
    therefore faster. But not extensible: it is not possible to add
    other parsing or printing kits neither in command arguments nor
    with the "load" directive inside sources. Suitable for compiling
    sources not using other syntax extensions.</dd>
  <dt><tt>camlp5o</tt></dt>
  <dd>Shortcut for "<tt>camlp5 pa_o.cmo pa_op.cmo pr_dump.cmo</tt>"</dd>
  <dt><tt>camlp5o.opt</tt></dt>
  <dd>Same as previous, and like "<tt>camlp5r.opt</tt>", faster and
    not extensible. Moreover, this has been produced by compilation of
    Camlp5 grammars, resulting in a still faster executable.</dd>
  <dt><tt>camlp5sch</tt></dt>
  <dd>Shortcut for "<tt>camlp5 pa_scheme.cmo pr_dump.cmo</tt>"</dd>
</dl>

<h2>OCaml toplevel files</h2>

<p>These object files can be loaded in the OCaml toplevel to make Camlp5
  parse the input. It is possible to load them either by putting them
  as parameter of the toplevel, or by using the directive "load". The
  option "<tt>-I +camlp5</tt>" has to be added to the "<tt>ocaml</tt>"
  command (the OCaml toplevel).</p>

<dl>
  <dt><tt>camlp5r.cma</tt></dt>
  <dd>Read phrases and display results in revised syntax</dd>
  <dt><tt>camlp5o.cma</tt></dt>
  <dd>Read phrases and display results in normal syntax</dd>
  <dt><tt>camlp5sch.cma</tt></dt>
  <dd>Read phrases in Scheme syntax</dd>
</dl>

<h2>Library files</h2>

<p>The <a href="library.html">Camlp5 library</a> is named
  "<tt>gramlib.cma</tt>" and its native code version is
  "<tt>gramlib.cmxa</tt>". They contain the modules:</p>

<ul>
  <li>Ploc : building and
    combining <a href="locations.html">locations</a></li>
  <li>Plexing : lexing for Camlp5 grammars</li>
  <li>Plexer : lexer used in revised and normal syntax</li>
  <li>Gramext : implementation of extensible grammars</li>
  <li>Grammar : <a href="grammars.html">extensible grammars</a></li>
  <li>Extfold : functions for grammar extensions FOLD0 and FOLD1</li>
  <li>Extfun : functions for <a href="extfun.html">extensible
      functions</a></li>
  <li>Eprinter : <a href="printers.html">extensible printers</a></li>
  <li>Fstream : <a href="fparsers.html">functional streams</a></li>
  <li>Pretty : <a href="pretty.html">pretty printing</a> on
    strings</li>
</ul>

<p>This is a pure library : when linking with it, the Camlp5 program
  is <em>not</em> included.</p>

<div class="trailer">
</div>

</div>

</body>
</html>
